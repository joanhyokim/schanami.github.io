<script src="jquery-3.2.0.min.js"></script>
<script src="jquery-ui.js"></script>
<script src="jquery.ui.touch-punch.min.js"></script>
<style type="text/css">
.shake {    
    /*-webkit-animation: degradedCardSwipeHint 0.6s ease-in-out 0.6s 1 alternate;*/
    -webkit-animation: degradedCardSwipeHint .8s;
        animation: degradedCardSwipeHint .8s
}

@-webkit-keyframes shake {
 from {
    /*-webkit-transform: rotate(0deg);*/
    -webkit-transform-origin: initial;
 }
 to {
   /*-webkit-transform-origin:50% 50%;*/
   /*-webkit-transform: rotate(-180deg);*/
   -webkit-transform: rotate(-23deg);
 }

}

@-webkit-keyframes degradedCardSwipeHint {
    0%,
    to {
        -webkit-transform: translateX(-75px) translateY(0) translateZ(0) rotate(0deg);
        transform: translateX(-75px) translateY(0) translateZ(0) rotate(0deg);
        -webkit-transform-origin: initial 90%;
        transform-origin: 10% 90%
    }
    50% {
        -webkit-transform: translateX(-75px) translateY(0) translateZ(0) rotate(-10deg);
        transform: translateX(-75px) translateY(0) translateZ(0) rotate(-10deg);
        -webkit-transform-origin: 10% 90%;
        transform-origin: 10% 90%
    }
}
@keyframes degradedCardSwipeHint {
    0%,
    to {
        -webkit-transform: translateX(-75px) translateY(0) translateZ(0) rotate(0deg);
        transform: translateX(-75px) translateY(0) translateZ(0) rotate(0deg);
        -webkit-transform-origin: 10% 90%;
        transform-origin: 10% 90%
    }
    50% {
        -webkit-transform: translateX(-75px) translateY(0) translateZ(0) rotate(-10deg);
        transform: translateX(-75px) translateY(0) translateZ(0) rotate(-10deg);
        -webkit-transform-origin: 10% 90%;
        transform-origin: 10% 90%
    }
}




.stack {
    margin: 20px auto;
    width: 400px;
    padding: 0;
    position: relative;
    max-width: 100%;
}
.stack img {
    border: solid #fff 1px;
}
.stack a {
    cursor: grab;
    position: absolute;
    top: 0;
    left: 0;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
    outline: 1px solid transparent;
    border:solid white 1px;
    -webkit-transform: translate(-30px,30px);
    transform: translate(-30px,30px);    
    box-shadow: 1px 2px 15px rgba(75, 75, 75, 0.7)

}
.stack-vertspread.active a:nth-child(2) {
    -webkit-transform: translate(-45px,20px);
    transform: translate(-45px,20px);
    -webkit-transition-delay: .2s;
    transition-delay: .2s;
}

.stack-vertspread.active a:nth-child(3) {
    -webkit-transform: translate(-60px,10px);
    transform: translate(-60px,10px);
    -webkit-transition-delay: .1s;
    transition-delay: .1s;
}
.stack-vertspread.active a:nth-child(4) {
    -webkit-transform: translateX(-75px);
    transform: translateX(-75px);
}

</style>
<script>
  $( function() {
    $( ".stack-vertspread a" ).draggable({
        axis: "x",
    	start: function(){
            document.querySelector("#img01").classList.remove("shake");    
    	},
    	drag: function(){
    	},
    	stop: function(){
    		console.log($(this).attr("id"));
    		if($(".stack-vertspread a").length == 4){
    			var id_selector = $(this).attr("id");
    			// alert(id_selector);
				// $(this).insertBefore(".stack-vertspread img");

				$(".stack-vertspread a").first().before($("#"+id_selector));
				$(".stack-vertspread a").attr("style","");
    		}
			
    	}
    });
});
</script>

<script>
var refreshed = false;
var scrollListener = function(){
    if(window.scrollY >= 0 && !refreshed){
        document.querySelector("#img01").setAttribute("class","shake");
        refreshed = true;
        // document.querySelector("#img01").classList.remove("shake");    
    }
    // document.querySelector("#img01").removeAttribute("class");
    // document.querySelector("#img01").classList.remove("shake");    
    window.removeEventListener("load",scrollListener);
}
window.addEventListener("load",scrollListener);
</script>

<figure class="stack stack-vertspread active">
					<a href="http://www.allurebridals.com" target="_blank" id="img04"><img src="7_9400F.jpg" alt="img04"></a>
                    <a href="http://www.allurebridals.com" target="_blank" id="img03"><img src="7_9401F.jpg" alt="img03"></a>
                    <a href="http://www.allurebridals.com" target="_blank" id="img02"><img src="7_9402F.jpg" alt="img02"></a>
                    <a href="http://www.allurebridals.com" target="_blank" id="img01"><img src="7_9403F.jpg" alt="img01"></a>
</figure>